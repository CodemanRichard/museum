<!--使用开源js库Leaflet-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!--引入外部的Leaflet样式表-->
    <link
      rel="stylesheet"
      href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"
    />
    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" type="text/javascript"></script>

    <style>
      html,
      body {
        height: 100%;
        width: 100%;
      }
      body {
        margin: 0;
      }
      #map {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>

  <body>
    <div id="map"></div>
  </body>

  <script type="text/javascript">
    var points = [
      ["ZANZIBAR", -6.13, 39.31],
      ["TOKYO", 35.68, 139.76],
      ["AUCKLAND", -36.85, 174.78],
      ["BANGKOK", 13.75, 100.48],
      ["DELHI", 29.01, 77.38],
      ["SINGAPORE", 1.36, 103.75],
      ["BRASILIA", -15.67, -47.43],
      ["RIO DE JANEIRO", -22.9, -43.24],
      ["TORONTO", 43.64, -79.4],
      ["EASTER ISLAND", -27.11, -109.36],
      ["SEATTLE", 47.61, -122.33],
      ["LONDON", 51.5072, -0.1275],
      ["TAIPEI", 25.105497, 121.597366],
      ["XIAMEN", 24.4798, 118.0894],
    ];

    //create map object and set default positions and zoom level
    var map = L.map("map").setView([20, 0], 2);
    L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png", {
      attribution:
        '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
    }).addTo(map);

    var Icon = L.icon({
      iconUrl:
        "logo.png",
      //shadowUrl: 'http://leafletjs.com/docs/images/leaf-shadow.png',

      iconSize: [20, 20], // size of the icon
      //shadowSize:   [50, 64], // size of the shadow
      iconAnchor: [10, 20], // point of the icon which will correspond to marker's location
      //shadowAnchor: [4, 62],  // the same for the shadow
      popupAnchor: [0, -10], // point from which the popup should open relative to the iconAnchor
    });

    for (var i = 0; i < points.length; i++) {
      let marker = L.marker([points[i][1], points[i][2]], { icon: Icon })
        .bindPopup(points[i][0])
        .addTo(map);
      map.on("zoomend", function () {
        let currentZoom = map.getZoom();
        let scaleFactor = currentZoom/2;
        let newSize = [20 * scaleFactor, 20 * scaleFactor];
        Icon.options.iconSize = newSize;
        marker.setIcon(Icon);
      });
      marker.on("click", function (e) {
        console.log(e.target.getPopup().getContent());
      });
    }
  </script>
</html>
